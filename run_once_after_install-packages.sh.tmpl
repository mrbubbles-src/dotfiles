{{- /* ─────────────────────────────  macOS  ───────────────────────────── */ -}}
{{- if eq .chezmoi.os "darwin" -}}
#!/bin/sh
set -euo pipefail

# ── Brew ───────────────────────────────────────────────────────────────
brew install --cask ghostty calibre dockdoor dbeaver-community steipete/tap/codexbar vhs
brew tap mongodb/brew
brew install git mongodb-community fzf zoxide commitizen neovim lux ffmpeg gh deno pirj/noclamshell/noclamshell uv postgresql@18
source ~/.zshrc
brew services start mongodb-community
brew services start noclamshell
brew services start postgresql@18
echo 'Remember MongoDB Compass → https://mongodb.com/docs/compass/install/'

# ── NVM ────────────────────────────────────────────────────────────────
cd "$HOME"
curl -fsSL https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.1/install.sh | bash
export NVM_DIR="$HOME/.nvm"
. "$NVM_DIR/nvm.sh"

# ── Node + Globals ─────────────────────────────────────────────────────
source ~/.zshrc
nvm install --lts
nvm use --lts
npm install -g nodemon bubbles-express-generator @github/copilot lighthouse netlify-cli npm-check-updates
echo 'Remember MongoDB Compass → https://www.mongodb.com/docs/compass/install/


# ─ Bun + Globals ─────────────────────────────────────────────────────
curl -fsSL https://bun.com/install | bash
export BUN_INSTALL="$HOME/.bun"
export PATH="$BUN_INSTALL/bin:$PATH"
source ~/.zshrc
bun add -g bubbles-express-generator @github/copilot lighthouse netlify-cli

# ----------------- Various ---------------------------$
defaults write -g ApplePressAndHoldEnabled -bool false
curl -fsSL https://claude.ai/install.sh | bash
curl https://cursor.com/install -fsS | bash
source ~/.zshrc

# ─────────────────────────────  Linux / WSL  ────────────────────── 
# {{- else if eq .chezmoi.os "linux" -}}
#!/bin/sh
# set -euo pipefail
# ── MongoDB Repo hinzufügen (laut offizieller Anleitung) ───────────────
# cd "$HOME"
# sudo apt-get install gnupg curl
# curl -fsSL https://www.mongodb.org/static/pgp/server-8.0.asc | \
#    sudo gpg -o /usr/share/keyrings/mongodb-server-8.0.gpg \
#    --dearmor
# echo "deb [ arch=amd64,arm64 signed-by=/usr/share/keyrings/mongodb-server-8.0.gpg ] https://repo.mongodb.org/apt/ubuntu noble/mongodb-org/8.0 multiverse" | sudo tee /etc/apt/sources.list.d/mongodb-org-8.0.list
# sudo apt-get update
# sudo apt-get install -y mongodb-org
# sudo systemctl start mongod
# echo 'Remember MongoDB Compass → https://www.mongodb.com/docs/compass/install/'
# ── Apt-Pakete ─────────────────────────────────────────────────────────
# sudo apt install fzf
# curl -sSfL https://raw.githubusercontent.com/ajeetdsouza/zoxide/main/install.sh | sh
# ── NVM ────────────────────────────────────────────────────────────────
# curl -fsSL https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.1/install.sh | bash
# export NVM_DIR="$HOME/.nvm"
# . "$NVM_DIR/nvm.sh"
# ── Node + Globals ──────────────────────────
# source ~./zshrc
# nvm install --lts
# nvm use --lts
# npm install -g nodemon bubbles-express-generator @github/copilot lighthouse netlify-cli npm-check-updates

# ─  Bun + Globals ─────────────────────────────────────────────────────
# curl -fsSL https://bun.com/install | bash
# export BUN_INSTALL="$HOME/.bun"
# export PATH="$BUN_INSTALL/bin:$PATH"
# source ~/.zshrc
# bun add -g bubbles-express-generator @github/copilot lighthouse netlify-cli

# ─────────────────────────────  Windows 11  ───────────────────────
# {{- else if eq .chezmoi.os "windows" -}}
# $ErrorActionPreference = 'Stop'

# ── Winget Pakete ──────────────────────────────────────────────────────
# winget install --id MongoDB.Server            -e --accept-package-agreements --accept-source-agreements
# winget install --id fzf.fzf                   -e
# winget install --id ajeetdsouza.zoxide        -e
# winget install --id CoreyButler.NVMforWindows -e
# Write-Host 'Remember MongoDB Compass → https://www.mongodb.com/docs/compas/sinstall/'

# ── PATH aktualisieren (damit nvm sofort verfügbar ist) ───────────────
# $env:Path = [Environment]::GetEnvironmentVariable('Path','Machine') + ';' +
#             [Environment]::GetEnvironmentVariable('Path','User')

# ── Node + Globals (NVM für Windows) ──────────────────────────────────
# nvm install lts
# nvm use lts
# npm install -g nodemon bubbles-express-generator commitizen
{{- end -}}
